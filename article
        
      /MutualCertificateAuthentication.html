<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-right:0in;
	margin-left:0in;
	font-size:24.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-right:0in;
	margin-left:0in;
	font-size:18.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
code
	{font-family:"Courier New";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
span.MsoIntenseEmphasis
	{color:#4F81BD;
	font-weight:bold;
	font-style:italic;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Times New Roman","serif";
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Times New Roman","serif";
	font-weight:bold;}
span.apple-converted-space
	{mso-style-name:apple-converted-space;}
span.with-breadcrumbs
	{mso-style-name:with-breadcrumbs;}
span.page-metadata-attachments-text
	{mso-style-name:page-metadata-attachments-text;}
span.page-metadata-attachments-count
	{mso-style-name:page-metadata-attachments-count;}
span.noprint
	{mso-style-name:noprint;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>

<div class=WordSection1>

<p class=MsoListParagraph><span style='font-size:24.0pt;line-height:115%'><a
href="https://visawiki/display/RAR/Mutual+Certificate+Authentication"><span
style='color:#333333'>Mutual Certificate Authentication</span></a></span></p>

<div style='border:none;border-bottom:solid #4F81BD 1.0pt;padding:0in 0in 4.0pt 0in'>

<p class=MsoTitle><span style='font-size:20.0pt'>Introduction</span></p>

</div>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;text-align:justify;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>Mutual SSL authentication or certificate
based mutual authentication refers to two parties authenticating each other
through verifying the provided digital certificate so that both parties are
assured of the others' identity. The mutual certificate authentication involves
the following steps,</span></p>

<p class=MsoNormal style='margin-left:.25in;text-align:justify;text-indent:
-.25in;line-height:12.0pt'><span style='font-size:12.0pt;color:#333333'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:12.0pt;color:#333333'>A client requests access to a protected
resource.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-align:justify;text-indent:
-.25in;line-height:12.0pt'><span style='font-size:12.0pt;color:#333333'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:12.0pt;color:#333333'>The server presents its certificate to
the client.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-align:justify;text-indent:
-.25in;line-height:12.0pt'><span style='font-size:12.0pt;color:#333333'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:12.0pt;color:#333333'>The client verifies the server’s
certificate.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-align:justify;text-indent:
-.25in;line-height:12.0pt'><span style='font-size:12.0pt;color:#333333'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:12.0pt;color:#333333'>If successful, the client sends its
certificate to the server.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-align:justify;text-indent:
-.25in;line-height:12.0pt'><span style='font-size:12.0pt;color:#333333'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:12.0pt;color:#333333'>The server verifies the client’s
credentials.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-align:justify;text-indent:
-.25in;line-height:12.0pt'><span style='font-size:12.0pt;color:#333333'>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:12.0pt;color:#333333'>If successful, the server grants access
to the protected resource requested by the client.&nbsp;</span></p>

<p class=MsoNormal style='line-height:12.0pt'><span style='position:absolute;
z-index:251673600;margin-left:567px;margin-top:9px;width:132px;height:21px'><img
width=132 height=21 src="MCF_files/image001.png" alt=www.codeproject.com></span><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><img
border=0 width=711 height=506 id="Picture 12" src="MCF_files/image002.png"
alt="https://visawiki/download/attachments/114789633/mutualssl.png?version=1&amp;modificationDate=1378840164000&amp;api=v2"></span></p>

<div style='border:none;border-bottom:solid #4F81BD 1.0pt;padding:0in 0in 4.0pt 0in'>

<p class=MsoTitle><span style='font-size:20.0pt'>Mutual SSL Authentication
(server &lt;--&gt; client)</span></p>

</div>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;text-align:justify;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>Here are the detailed steps enabling the
Mutual SSL Authentication (or) Mutual Certificate based Authentication between
a server and client. The JRE key tool is being used here for generating the
trusted certificates and importing certificates. Also have captured the
detailed information for enabling the tomcat server and browser (client) for
mutual ssl authentication.</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;text-align:justify;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>NOTE: Here we have generated the
self-signed certificate using keytool to provide better information on how to
generate certificates, import certificates and enabling the server for mutual
ssl authentication. Whereas in Production environment, Visa provides the
certificates which are generated by Certificate Authorities (CA) – so we don't
need to execute the steps for generating the certificates.</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
class=MsoIntenseEmphasis>Generate key for the client:-</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><b><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>NOTE:
Before executing any of the following commands, please make sure that the JRE
path is set in the environment variables. Otherwise you can provide the
complete path of your keytool location while executing these commands.</span></b></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=3 height=12></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=635 height=63 src="MCF_files/image003.png"
  alt="/opt/java/1.7/jre/bin/keytool -genkey -v -alias umsclientKey -keyalg RSA &#13;&#10;-storetype PKCS12 -keystore umsclient.p12 -storepass changeit -keypass changeit&#13;&#10;&#13;&#10;"></td>
 </tr>
</table>

<b><span style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><b><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=963
 style='width:722.4pt'>
 <tr>
  <td width=948 style='width:711.15pt;background:white;padding:0in 0in 0in 0in'></td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
class=MsoIntenseEmphasis>Export the client cerificate:-</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=2 height=5></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=635 height=61 src="MCF_files/image004.png"
  alt="/opt/java/1.7/jre/bin/keytool -export -alias umsclientKey -keystore umsclient.p12 -storetype PKCS12 -storepass changeit -rfc -file umsclient.crt"></td>
 </tr>
</table>

<b><span style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><b><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=963
 style='width:722.4pt'>
 <tr>
  <td width=948 style='width:711.15pt;background:white;padding:0in 0in 0in 0in'></td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
class=MsoIntenseEmphasis>Generate key for the Server:-</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=3 height=5></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=635 height=61 src="MCF_files/image005.png"
  alt="/opt/java/1.7/jre/bin/keytool -genkey -keyalg RSA -alias tomcat -keystore /usr/local/appserver/tcServer/UserManagementRestService/conf/UserManagementWS.jks -storepass changeit -keypass changeit -validity 365"></td>
 </tr>
</table>

<b><span style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><b><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><b><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></b></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=963
 style='width:722.4pt'>
 <tr>
  <td width=963 style='width:722.4pt;background:white;padding:0in 0in 0in 0in'></td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><img
border=0 width=631 height=121 id="Picture 11" src="MCF_files/image006.jpg"
alt="https://visawiki/download/attachments/114789633/Gencert.jpg?version=1&amp;modificationDate=1378840602000&amp;api=v2"></span><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><br>
</span><span class=MsoIntenseEmphasis>Import the Client certificate into Server
keystore:-</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>NOTE: In production, we can directly
import the CA’s key (usually with the extansion .jks) into the server’s trust
store, instead adding the client certificate into server’s trust store.</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='position:relative;z-index:251665408;left:-1px;top:10px;width:655px;
height:94px'><img width=655 height=84 src="MCF_files/image007.png"
alt="/opt/java/1.7/jre/bin/keytool -import -v -file umsclient.crt -alias umsclientKey -keystore /usr/local/appserver/tcServer/UserManagementRestService/conf/UserManagementWS.jks -storepass changeit&#13;&#10;&#13;&#10;"></span><span
style='font-size:12.0pt;color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>&nbsp;</span></p>

<br clear=ALL>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>You can look inside the certification
key named UserManagementWS.jks to check the client information and server keys,</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=0 height=17></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=677 height=75 src="MCF_files/image008.png"
  alt="/opt/java/1.7/jre/bin/keytool  -list -v -keystore /usr/local/appserver/tcServer/UserManagementRestService/conf/UserManagementWS.jks -storepass changeit&#13;&#10;&#13;&#10;"></td>
 </tr>
</table>

<span style='font-size:12.0pt;color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<br clear=ALL>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><img
border=0 width=628 height=467 id="Picture 10" src="MCF_files/image009.jpg"
alt="https://visawiki/download/attachments/114789633/ssl_list.jpg?version=1&amp;modificationDate=1378840194000&amp;api=v2"></span><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><br>
</span><span style='font-size:12.0pt;color:#333333'>Now it’s time to configure
the server for enabling the SSL connector and client authentication
(uncommented the connector from server.xml or insert the following snippet to
server.xml):</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='position:absolute;z-index:251667456;margin-left:61px;margin-top:11px;
width:653px;height:519px'><img width=653 height=519 src="MCF_files/image010.png"
alt="&lt;Connector&#13;&#10; &#13;&#10;                   executor=&quot;tomcatThreadPool&quot;&#13;&#10; &#13;&#10;                   port=&quot;${bio.https.port}&quot;&#13;&#10; &#13;&#10;                   protocol=&quot;HTTP/1.1&quot;&#13;&#10; &#13;&#10;                   connectionTimeout=&quot;20000&quot;&#13;&#10; &#13;&#10;                   redirectPort=&quot;${bio.https.port}&quot;&#13;&#10; &#13;&#10;                   acceptCount=&quot;100&quot;&#13;&#10; &#13;&#10;                   maxKeepAliveRequests=&quot;15&quot;&#13;&#10; &#13;&#10;                   keystoreFile=&quot;${catalina.base}/conf/&lt;YOURJKSFILENAME&gt;.jks&quot;&#13;&#10; &#13;&#10;                   keystorePass=&quot;changeit&quot;&#13;&#10; &#13;&#10;                   truststoreFile=&quot;${catalina.base}/conf/&lt;YOURJKSFILENAME&gt;.jks&quot;&#13;&#10; &#13;&#10;                   truststorePass=&quot;changeit&quot;&#13;&#10; &#13;&#10;                   clientAuth=&quot;false&quot;&#13;&#10; &#13;&#10;                   sslProtocol=&quot;TLS&quot;&#13;&#10; &#13;&#10;                   keyAlias=&quot;tomcat&quot;&#13;&#10; &#13;&#10;                   SSLEnabled=&quot;true&quot; /&gt;&#13;&#10; &#13;&#10;                   scheme=&quot;https&quot;&#13;&#10; &#13;&#10;                   secure=&quot;true&quot;/&gt;&#13;&#10;"></span><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>            </span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=963
 style='width:722.4pt'>
 <tr>
  <td width=948 style='width:711.15pt;background:white;padding:0in 0in 0in 0in'></td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>The last is adding your credential of
your client key into the server’s tomcat-users file (tomcat-users.xml). You
have to add something like below from your client key to tomcat-users.xml file.</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=963
 style='width:722.4pt'>
 <tr>
  <td width=963 style='width:722.4pt;background:white;padding:0in 0in 0in 0in'>
  <div>
  <p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:
  0in;margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
  style='position:relative;z-index:251671552;left:-5px;top:1px;width:618px;
  height:66px'><img width=618 height=65 src="MCF_files/image011.png"
  alt="&lt;user username=&quot;CN=InternalProjectWS, OU=DADS, O=DADS, L=Austin, ST=TX, C=US&quot; &#13;&#10;password=&quot;changeit&quot; roles=&quot;&quot; /&gt;&#13;&#10;"></span><span
  style='font-size:12.0pt;color:#333333'>&nbsp;</span></p>
  </div>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>Now it’s time to test it. Open Firefox
browser (or any other browser, however the adding certification to browser
might be different) and hit the https url for the your server, like&nbsp;</span><a
href="https://mvqsrru16d.qa.intra:9853/v1/Roles"><span style='font-size:12.0pt;
color:#333333;text-decoration:none'>https://mvqsrru16d.qa.intra:9853/v1/Roles</span></a><span
style='font-size:12.0pt;color:#333333'>. Now you will be prompted to trust the
site by adding the certification to browser.</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><b><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>IMPORTANT:
Once the certificate is added please go back to server.xml and update the
&quot;<i>clientAuth&quot; to &quot;true&quot;</i></span></b><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;<b>then
restart your server.</b></span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><img
border=0 width=629 height=366 id="Picture 9" src="MCF_files/image012.png"
alt="https://visawiki/download/attachments/114789633/firefox1.jpg?version=1&amp;modificationDate=1378840274000&amp;api=v2"></span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>Expand ‘I Understand the Risks’ and
click on ‘Add Exception’</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><img
border=0 width=629 height=391 id="Picture 8" src="MCF_files/image013.png"
alt="https://visawiki/download/attachments/114789633/firefox2.jpg?version=1&amp;modificationDate=1378840292000&amp;api=v2"></span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>You will be prompted to ‘Add the
security Exception’. You can add the certificate just by clicking on the
‘Confirm security Exception’</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;text-indent:.5in;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;<img
border=0 width=516 height=402 id="Picture 7" src="MCF_files/image014.jpg"
alt="https://visawiki/download/attachments/114789633/firefox3.jpg?version=1&amp;modificationDate=1378840311000&amp;api=v2"></span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>Once the certificate is added successful
and everything seems correct then you will be prompted with the following
messages. If you see this one which means the mutual ssl authenication working
correctly between your client and server.&nbsp;&nbsp;&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><img
border=0 width=614 height=320 id="Picture 6" src="MCF_files/image015.jpg"
alt="https://visawiki/download/attachments/114789633/firefox4.jpg?version=1&amp;modificationDate=1378840335000&amp;api=v2"></span><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><br>
<br>
</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><b><u><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><span
 style='text-decoration:none'>&nbsp;</span></span></u></b></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><b><u><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><span
 style='text-decoration:none'>&nbsp;</span></span></u></b></p>

<div style='border:none;border-bottom:solid #4F81BD 1.0pt;padding:0in 0in 4.0pt 0in'>

<p class=MsoTitle><span style='font-size:20.0pt'>Importing the certificate to
Google chrome</span></p>

</div>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>Open Google chrome and go to
Settings-&gt; Show advanced setting -&gt; HTTPS/SSL -&gt; Manage Certificates
-&gt; Import. Then the following screen will be popped up, Click 'Next&gt;'.
Browse to the keystore that generated for client and select it and click next.</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;<img
border=0 width=535 height=356 id="Picture 5" src="MCF_files/image016.jpg"
alt="https://visawiki/download/attachments/114789633/chrome1.jpg?version=1&amp;modificationDate=1378840365000&amp;api=v2"></span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'>&nbsp;&nbsp;<img
border=0 width=531 height=337 id="Picture 4" src="MCF_files/image017.jpg"
alt="https://visawiki/download/attachments/114789633/chrome2.jpg?version=1&amp;modificationDate=1378840376000&amp;api=v2"></span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>Enter the password set for your client
key store. Then click next until you get to 'Finish' button screen.&nbsp;&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><img
border=0 width=546 height=352 id="Picture 3" src="MCF_files/image018.jpg"
alt="https://visawiki/download/attachments/114789633/chrome3.jpg?version=1&amp;modificationDate=1378840389000&amp;api=v2"></span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><img
border=0 width=546 height=344 id="Picture 2" src="MCF_files/image019.jpg"
alt="https://visawiki/download/attachments/114789633/chrome5.jpg?version=1&amp;modificationDate=1378840474000&amp;api=v2"></span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:12.0pt;color:#333333'>Now the key store has been successfully
added to your Google chrome. It's all set to hit the https url on your chrome.
If everything is correct then the following screen will be popped up, which
means your Google chrome is enabled for mutual ssl authentication and its
working correctly.&nbsp;&nbsp;</span></p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt;line-height:12.0pt'><span
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:#333333'><img
border=0 width=641 height=347 id="Picture 1" src="MCF_files/image020.png"
alt="https://visawiki/download/attachments/114789633/chrome6.jpg?version=1&amp;modificationDate=1378840490000&amp;api=v2"></span></p>

<p class=MsoNormal>&nbsp;</p>

</div>

</body>

</html>
